/*! v:577937 b:default c:videoInComboDefaultController */
(window["pcodeJsonp577937pMtBhEBQWT"]=window["pcodeJsonp577937pMtBhEBQWT"]||[]).push([[59],{102:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var r,o=n(353),i=n(32),a=n(148),l=n(113);var c=n(80),u=[].find,d=Object(c["a"])(u)?function(e,t){return u.call(e,t)}:function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(t(r,n,e))return r}};function s(e){var t,n,c,u,s;return(void 0===t&&(t=window),void 0===r&&(r=t.JSON),r).stringify(e,(n=[],u="undefined"==typeof WeakMap?void 0:new WeakMap,s=[],c={set:function(e,t){if(void 0!==u)try{u.set(e,t)}catch(n){s.push({path:t,value:e})}else s.push({path:t,value:e})},get:function(e){var t=d(s,(function(t){return t.value===e}));return void 0!==u&&void 0===t?u.get(e):t?t.path:void 0}},function(e,t){if(Object(i["a"])(t))return Object(a["a"])(t.name)?t.name:"[Function]";if(Object(o["a"])(t))return{name:(r=t).name,message:r.message,stack:r.stack};var r;if(!Object(l["a"])(t))return t;var u=c.get(t);if(u)return"[Circular "+u+"]";for(;n.length>0&&n[n.length-1].value[e]!==t;)n.pop();var d=(n.length>0?n[n.length-1].path:"")+(e?"/"+e:"~");return n.push({path:d,value:t}),c.set(t,d),t}))}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){var t="function"==typeof Map?new Map:void 0;return(v=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return p(e,arguments,b(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),h(r,e)})(e)}function p(e,t,n){return(p=g()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&h(o,n.prototype),o}).apply(null,arguments)}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y="DEFAULT_ERROR_MESSAGE",m=0,_="",S="?:?:?",O=!0,C=function(e){var t,r;r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o;o=i;function i(t,r){var o,c;void 0===t&&(t={}),void 0===r&&(r={});var u,d="object"==typeof t?t:{message:String(t||y)};o=e.call(this)||this,Object.defineProperty(f(o),"originalError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f(o),"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f(o),"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f(o),"isFatal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f(o),"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f(o),"stack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f(o),"toString",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f(o),"toJSON",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),o.originalError=(u=t,Object(l["a"])(u)&&Object(a["a"])(u.name)&&Object(a["a"])(u.message)?t:void 0),n(552)(f(o),i.prototype);var v=r.code||d.code||d.id||m,p=r.message||d.message||y;o.message="VAS Error ["+v+"]"+(p?"["+p+"]":""),o.code=v,o.isFatal=Boolean(null!==(c=d.isFatal)&&void 0!==c?c:O),o.details=r.details||d.details||_;var g=d.stack||function(e){var t=e.url,n=e.line,r=e.col,o=e.fileName,i=e.columnNumber,a=e.lineNumber;return(t||o||"?")+":"+(n||a||"?")+":"+(r||i||"?")}(d),h=g===S?o.stack:g;if(h&&h!==S)o.stack=h;else if(!o.stack)try{throw new Error(o.message)}catch(e){o.stack=h=e.stack||S}return o.toString=function(){return s(o.toJSON())},o.toJSON=function(){return{originalError:o.originalError,message:o.message,code:o.code,isFatal:o.isFatal,details:o.details,stack:h}},o}return i}(v(Error))},113:function(e,t,n){"use strict";function r(e){var t=typeof e;return Boolean(e)&&("object"===t||"function"===t)}n.d(t,"a",(function(){return r}))},148:function(e,t,n){"use strict";function r(e){return"string"==typeof e}n.d(t,"a",(function(){return r}))},1500:function(e,t,n){"use strict";function r(e,t){var n=e.querySelector('[data-name="'.concat(t,'"]'));return null!=n?n:void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.getRehydratedElement=t.findRehydratedElement=void 0,t.findRehydratedElement=r,t.getRehydratedElement=function(e,t){var n=r(e,t);if(!n)throw new Error("Cannot find rehydrated element [".concat(t,"]"));return n}},1517:function(e,t,n){"use strict";n.r(t),n.d(t,"combineValueSignals",(function(){return i}));var r=n(1550),o=n(104);function i(e,t,n){var i=function(){return Object(r["a"])(e,(function(e){return e.getValue()}))},a=t.apply(void 0,i());n(a);var l=function(){var e=t.apply(void 0,i());a!==e&&(a=e,n(e))},c=Object(r["a"])(e,(function(e){return e.add(l)}));return function(){Object(o["a"])(c)}}},1539:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUniqueInt=void 0;var r=0;t.getUniqueInt=function(){return r++}},1550:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t,n){for(var r=new Array(e.length),o=0;o<e.length;o++)r[o]=t.call(n,e[o],o,e);return r}},1557:function(e,t,n){"use strict";n.r(t),n.d(t,"combineValueSignalsIntoNewOne",(function(){return a}));var r=n(1517),o=n(160),i=n(138);function a(e,t,n){var a,l=new o["Signal"],c=Object(r["combineValueSignals"])(e,t,(function(e){a=e,l.dispatch(e)})),u=new i["ValueSignal"](a,n),d=l.add(u);return{valueSignal:u,teardown:function(){d(),c()}}}},1598:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDocumentHiddenProperty=void 0;t.getDocumentHiddenProperty=function(e){return"hidden"in e?"hidden":"webkitHidden"in e?"webkitHidden":void 0}},1601:function(e,t,n){"use strict";var r,o=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AdLoaderPlayer=void 0;var a=n(1617),l=n(178),c=n(20),u=n(673),d=n(671),s=n(679),f=n(28),v=n(232),p=n(13),g=n(138),h=n(378),b=n(1618),y=n(1557),m=n(1602),_=(0,p.once)((function(){c.logger.traceLog({},"WorkaroundPauseAdUsing")})),S=(0,p.once)((function(){c.logger.traceLog({},"WorkaroundResumeAdUsing")}));function O(e){var t,n,r=e.currentTime,o=e.duration;return(0,h.isPositiveFiniteNumber)(o)&&(0,b.isUnsignedFiniteNumber)(r)?(t=r/o,n=o-r):(t=0,n=0),{progress:t,remainingTime:n}}var C=function(e){function t(t){var n=t.slot,r=t.videoSlot,o=t.adLoaderConfig,v=t.onInit,p=t.logParams,h=t.playbackParameters,b=t.loopVideoAfterPlayback,C=e.call(this)||this;C.adPodPlayingState=new g.ValueSignal({state:"idle",data:void 0}),C.adPodRemainingTime=new g.ValueSignal(0),C.isAdPodStarted=new g.ValueSignal(!1),C.isAdVolumeEnabled=new g.ValueSignal(!1),C.adVolumeAvailabilityState=new g.ValueSignal(!1),C.videoSlotPlayingState=new g.ValueSignal(!1),C.adLoaderPlayerStatus=new g.ValueSignal("idle"),C.videoSlot=r;var w=(0,u.loadVasModule)({win:window,moduleName:"AdLoader",config:(0,d.prepareVasLoaderConfig)(),serviceName:"pcode",serviceVersion:String((0,f.getCodeVersion)())}).promise,E=(0,a.getVideoVolume)(r)>0;C.isVideoSlotVolumeEnabled=new g.ValueSignal(E);var P=(0,y.combineValueSignalsIntoNewOne)([C.isAdVolumeEnabled,C.isVideoSlotVolumeEnabled,C.adPodPlayingState],(function(e,t,n){return"end"===n.state?t:e})),V=P.valueSignal,A=P.teardown;C.isVolumeEnabled=V,C.addDestroyHandler(A);var k=O(r);C.videoSlotProgress=new g.ValueSignal(k.progress),C.videoSlotRemainingTime=new g.ValueSignal(k.remainingTime);var I=function(){var e=O(r),t=e.progress,n=e.remainingTime;C.videoSlotProgress.dispatch(t),C.videoSlotRemainingTime.dispatch(n)};r.addEventListener("timeupdate",I),C.addDestroyHandler((function(){r.removeEventListener("timeupdate",I)}));var T=(0,y.combineValueSignalsIntoNewOne)([C.adPodPlayingState,C.adPodRemainingTime,C.videoSlotRemainingTime],(function(e,t,n){return"end"===e.state?n:t})),j=T.valueSignal,D=T.teardown;return C.adMediaRemainingTime=j,C.addDestroyHandler(D),w.then((function(e){if(!e)throw new Error("LVM returned no adLoader module");return e})).then((function(e){return o.vastBase64&&c.logger.traceLog({},"AdLoaderVastBase64"),e.AdLoader.create(i(i({},o),{adBreakType:"preroll"}))})).then((function(e){return e.loadAd()})).then((function(e){var t=e.createPlaybackController(r,n,i(i({controlsSettings:s.VAS_CONTROLS_SETTINGS_HIDE_ALL,backgroundBlur:!1,retainLastMediaAfterPlayback:Boolean(b),packshotSettings:{isEnabled:!1}},h),m.SURVEY_INPAGE_PLAYBACK_PARAMETERS));C.addDestroyHandler((function(){t.stopAd()})),C.addDestroyHandler(t.subscribe("AdStarted",(function(){C.isAdPodStarted.dispatch(!0)}))),C.addDestroyHandler(t.subscribe("AdStartRequest",(function(){C.adLoaderPlayerStatus.dispatch("playing")})));var o=function(){C.adPodRemainingTime.dispatch(t.getAdPodRemainingTime())};if(o(),C.addDestroyHandler(t.subscribe("AdRemainingTimeChange",o)),C.addDestroyHandler(t.subscribe("AdPlayingStateChange",(function(){C.adPodPlayingState.dispatch({state:t.getAdPlayingState(),data:t})}))),b){var u=t.resumeAd,d=t.pauseAd;t.resumeAd=function(){"end"===t.getAdPlayingState()?(S(),r.play()):u()},t.pauseAd=function(){"end"===t.getAdPlayingState()?(_(),r.pause()):d()}}t.subscribe("AdStopped",(function(){if(b){var e=t.getMediaElementStatusAfterAdStopped();e&&e.lastMediaRetained?(r.loop=!0,r.play(),r.muted=!0,C.adLoaderPlayerStatus.dispatch("looped")):(c.logger.traceLog({},"CannotRetainLastMediaForLoopPackshot"),C.adLoaderPlayerStatus.dispatch("completed"))}else C.adLoaderPlayerStatus.dispatch("completed")})),e.setStatsRootFields({pcodeStats:p}),C.addDestroyHandler(t.subscribe("AdVolumeChange",(function(){var e=t.getAdVolume();C.isAdVolumeEnabled.dispatch(e>0)}))),C.addDestroyHandler((0,l.addElementEventListener)({element:r,eventName:"volumechange",listener:function(){C.isVideoSlotVolumeEnabled.dispatch((0,a.getVideoVolume)(r)>0)}})),C.addDestroyHandler((0,l.addElementEventListener)({element:r,eventName:"pause",listener:function(){C.videoSlotPlayingState.dispatch(!1)}})),C.addDestroyHandler((0,l.addElementEventListener)({element:r,eventName:"ended",listener:function(){C.videoSlotPlayingState.dispatch(!1)}})),C.addDestroyHandler((0,l.addElementEventListener)({element:r,eventName:"play",listener:function(){C.videoSlotPlayingState.dispatch(!0)}})),C.addDestroyHandler((0,l.addElementEventListener)({element:r,eventName:"playing",listener:function(){C.videoSlotPlayingState.dispatch(!0)}}));var f=function(){C.adVolumeAvailabilityState.dispatch(t.getAdVolumeAvailabilityState())};f(),t.subscribe("AdVolumeAvailabilityStateChange",f),v(t)}))["catch"]((function(e){c.logger.error(e,"AdLoader Error"),c.logger.logVasEvent({error:e},"AdLoaderError")})),C}return o(t,e),t}(v.Destroyable);t.AdLoaderPlayer=C},1602:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SURVEY_INPAGE_PLAYBACK_PARAMETERS=void 0,t.SURVEY_INPAGE_PLAYBACK_PARAMETERS={disableSurveyCompleteScreen:!0,disableSurveyStartTimeout:!0}},1617:function(e,t,n){"use strict";function r(e){return e.muted?0:e.volume}n.r(t),n.d(t,"getVideoVolume",(function(){return r}))},1618:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUnsignedFiniteNumber=void 0,t.isUnsignedFiniteNumber=function(e){return"number"==typeof e&&isFinite(e)&&e>=0}},1620:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addEntry=void 0;var r=n(13),o=n(1539),i=n(38),a=n(1794),l=n(1795),c=n(1796),u={},d={root:document.body,rootMargin:"0px",threshold:Number.MIN_VALUE};var s=new IntersectionObserver((function(e){e.forEach((function(e){var t=e.target.id,n=u[t];for(var r in n)if(n.hasOwnProperty(r)){var o=n[r];switch(o.event){case"parentChange":(0,l.checkParentChange)(e,o);break;case"removeFromDOM":(0,c.checkRemoveFromDom)(e,o);break;case"elementDisplay":(0,a.checkElementDisplay)(e,o)}}}))}),d);t.addEntry=function(e,t,n,a){var l="id_"+(0,o.getUniqueInt)(),c=function(e,t){var n=e.getAttribute("id");if(!n)return e.id=t,t;return n}(e,l);return u[c]=u[c]||{},u[c][l]={event:t,callback:n,data:a},s.observe(e),(0,r.once)((function(){s.unobserve(e),1===(0,i.getObjectKeys)(u[c]).length?delete u[c]:delete u[c][l]}))}},1651:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onDocumentVisibilityChange=void 0,t.onDocumentVisibilityChange=function(e,t){var r=(0,n(1665).getDocumentVisibilityChangeEventName)(e);return r?(0,n(351).addEventListener)(e,r,(function(){t((0,n(1666).getDocumentVisibility)(e))})):n(3).noop}},1665:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDocumentVisibilityChangeEventName=void 0,t.getDocumentVisibilityChangeEventName=function(e){var t=(0,n(1598).getDocumentHiddenProperty)(e);if(t)return t.replace(/hidden/i,"visibilitychange")}},1666:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDocumentVisibility=void 0,t.getDocumentVisibility=function(e,t){void 0===t&&(t=!0);var r=(0,n(1598).getDocumentHiddenProperty)(e);return r?!e[r]:t}},1667:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createBlurCanvasAvatar=void 0;t.createBlurCanvasAvatar=function(e){var t=e.blurSlot,r=e.videoSlot,o=t.ownerDocument,i=o.defaultView;if(!i)throw new Error("Cannot determine blurSlot global scope");var a=o.createElement("div"),l="calc(100% + ".concat(40,"px)");(0,n(349).setStyle)(a,{position:"relative",overflow:"hidden",filter:"blur(".concat(20,"px)"),margin:"".concat(-20,"px"),width:l,height:l});var c=o.createElement("canvas");(0,n(349).setStyle)(c,{objectFit:"cover",width:"100%",height:"100%",overflow:"hidden"}),a.appendChild(c),t.appendChild(a);var u=c.getContext("2d");if(!u)throw new Error("Cannot create context for BlurCanvasAvatar");var d=!1,s=0,f=function(){s=i.setTimeout(v,40)},v=function(){if(!d){var e=r.videoWidth,t=r.videoHeight;e&&t?(c.width=e,c.height=t,u.drawImage(r,0,0),f()):f()}},p=function(){i.clearTimeout(s)},g=!1;return{destroy:function(){d=!0,p(),(0,n(54).removeNodeFromParent)(a)},controller:{setRepaintingActivity:function(e){e&&!g?v():p(),g=e}}}}},1684:function(e,t,n){"use strict";n.r(t),n.d(t,"setVideoMuted",(function(){return r}));function r(e,t){var n,r,o,i;r=function(){e.muted=t;var n=e.volume;if(!t&&0===n){var r=n>0?n:.5;e.volume=r}},i=(n=e).paused,r(),i||"function"==typeof(null==(o=n.play())?void 0:o["catch"])&&o["catch"]((function(){}))}},1787:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rehydrateCanvasBlurBackground=void 0;var r=n(1667);t.rehydrateCanvasBlurBackground=function(e){var t=e.canvasBlurContainer,n=e.videoSlot,o=e.adLoaderPlayer,i=(0,r.createBlurCanvasAvatar)({blurSlot:t,videoSlot:n}),a=i.destroy,l=i.controller;o.videoSlotPlayingState.getValue()&&l.setRepaintingActivity(!0),o.videoSlotPlayingState.add((function(e){l.setRepaintingActivity(e)})),o.addDestroyHandler(a)}},1788:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderVideoInComboSsrCodeToShadowRoot=void 0;var r=n(541),o=n(349);t.renderVideoInComboSsrCodeToShadowRoot=function(e){var t=e.renderToNode,n=e.nonce,i=e.ssr,a=i.html,l=i.css,c=e.destroyLatch,u=(0,r.hasShadowDomSupport)(),d=t;if(u){var s=t.ownerDocument.createElement("div");(0,o.setStyle)(s,{width:"100%"});var f=s.attachShadow({mode:"open"}),v=t.ownerDocument.createElement("div");f.appendChild(v),d=v,t.appendChild(s)}return d.innerHTML="".concat(a,"<style ").concat(n?'nonce="'.concat(n,'"'):"",">").concat(l,"</style>"),c.subscribe((function(){t.innerHTML=""})),{container:d}}},1789:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VIDEO_IN_COMBO_DEFAULT_VAS_PLAYBACK_PARAMETERS=void 0,t.VIDEO_IN_COMBO_DEFAULT_VAS_PLAYBACK_PARAMETERS={vpaidTimeout:3e4,videoTimeout:3e4,bufferFullTimeout:3e4,bufferEmptyLimit:30,controlsSettings:{visibility:!1,controlsVisibility:{}}}},1791:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rehydrateZenVolumeButton=void 0;var r=n(349),o=n(1500),i=n(1517),a=n(178),l=n(1684);t.rehydrateZenVolumeButton=function(e){var t=e.container,n=e.adLoaderPlayer,c=e.destroyLatch,u=n.adVolumeAvailabilityState,d=n.isVolumeEnabled,s=n.isAdPodStarted,f=n.adLoaderPlayerStatus,v=n.videoSlot,p=(0,o.getRehydratedElement)(t,"zen-volume-button-with-gradient"),g=(0,o.getRehydratedElement)(t,"zen-volume-button-clickable-container"),h=(0,o.getRehydratedElement)(t,"zen-volume-button-disabled"),b=(0,o.getRehydratedElement)(t,"zen-volume-button-enabled");c.subscribe((0,i.combineValueSignals)([s,f,u],(function(e,t,n){return!!n&&(!!e&&"completed"!==t)}),(function(e){(0,r.setStyle)(p,{display:e?"block":"none"})}))),c.subscribe(d.add((function(e){(0,r.setStyle)(b,{display:e?"block":"none"}),(0,r.setStyle)(h,{display:e?"none":"block"})}))),c.subscribe((0,a.addElementEventListener)({element:g,eventName:"click",listener:function(){var e=!d.getValue(),t=n.adPodPlayingState.getValue(),r=t.state,o=t.data;if("end"!==r)if(e){var i=v.volume>0?v.volume:1;null==o||o.setAdVolume(i)}else null==o||o.setAdVolume(0);else(0,l.setVideoMuted)(v,!e)}}))}},1792:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVideoInComboTextNameClickUrl=void 0,t.getVideoInComboTextNameClickUrl=function(e){var t,n=null===(t=e.dataParams)||void 0===t?void 0:t.click_url;if(n)return n.text_name}},1793:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onDisplay=t.onRemoveFromDOM=t.onParentChange=void 0,t.onParentChange=function(e,t){return(0,n(1620).addEntry)(e,"parentChange",t,{parent:e.parentElement})},t.onRemoveFromDOM=function(e,t){return(0,n(1620).addEntry)(e,"removeFromDOM",t)},t.onDisplay=function(e,t){return(0,n(1620).addEntry)(e,"elementDisplay",t,{visible:!1})}},1794:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkElementDisplay=void 0,t.checkElementDisplay=function(e,t){var n=e.intersectionRatio||1;!t.data.visible&&n>0&&(t.data.visible=!0,t.callback()),0===n&&(t.data.visible=!1)}},1795:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkParentChange=void 0,t.checkParentChange=function(e,t){var n=t.data.parent,r=e.target.parentElement;r&&n!==r&&(t.data.parent=r,t.callback())}},1796:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkRemoveFromDom=void 0,t.checkRemoveFromDom=function(e,t){var n=e.target.getAttribute("id");document.getElementById(n)||t.callback()}},1797:function(e,t,n){"use strict";var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.logInpageEvent=void 0;var o=n(20);t.logInpageEvent=function(e,t,n,i){void 0===i&&(i={});var a=r(r({},i),{pageId:t.getPageId(),impId:t.getImpId(),adb:!1,isReallySsr:n});o.logger.logVasEvent(a,"".concat("COMBO_INPAGE_PRODUCT_SSR","_").concat(e),100)}},1798:function(e,t,n){var r=n(2271),o=r._getCss;(e.exports=r)._getCss=function(e){return e=e||"",o().replace(/__id__/g,e)}},1899:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rehydrateClickThroughHandlerForAsset=void 0;var r=n(178),o=n(20);t.rehydrateClickThroughHandlerForAsset=function(e){var t=e.element,n=e.clickUrl,i=e.videoInComboDesign,a=e.assetName;return(0,r.addElementEventListener)({element:t,eventName:"click",listener:function(e){e.preventDefault(),n?(o.logger.logVasEvent({clickUrl:n},"VideoInComboClick_".concat(i,"_").concat(a)),open(n)):o.logger.logVasEvent({clickUrl:n},"VideoInComboNoClickUrl_".concat(i,"_").concat(a))}})}},1900:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVideoInComboWarningText=void 0,t.getVideoInComboWarningText=function(e){var t,n;return null===(n=null===(t=e.dataParams)||void 0===t?void 0:t.text)||void 0===n?void 0:n.warning}},1901:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVideoInComboClickUrlToCopy=void 0;var r=n(1902),o=n(1792);t.getVideoInComboClickUrlToCopy=function(e){return(0,r.getVideoInComboActionButtonClickUrl)(e)||(0,o.getVideoInComboTextNameClickUrl)(e)}},1902:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVideoInComboActionButtonClickUrl=void 0,t.getVideoInComboActionButtonClickUrl=function(e){var t,n=null===(t=e.dataParams)||void 0===t?void 0:t.click_url;if(n)return n.action_button}},1903:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVideoInComboAbuseUrl=void 0,t.getVideoInComboAbuseUrl=function(e){var t;return null===(t=e.dataParams)||void 0===t?void 0:t.abuse}},1904:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.usePackshotContext=t.getPackshotContextValue=t.PackshotContext=void 0;var r=n(3),o=n(63),i=n(535);t.PackshotContext=(0,o.createContext)({openClickThroughUrl:r.noop,clickUrl:"",label:""}),t.PackshotContext.Provider.displayName="PackshotContext",t.getPackshotContextValue=function(e){return{openClickThroughUrl:e.openClickThroughUrl,clickUrl:e.clickUrl,label:e.label}};t.usePackshotContext=function(){return(0,i.useContext)(t.PackshotContext)}},2251:function(e,t,n){"use strict";var r,o=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.VideoInComboController=t.VideoInComboDesignYaVideoController=void 0;var a=n(551),l=n(232),c=n(1788),u=n(20),d=n(1500),s=n(378),f=n(268),v=n(2424),p=n(2252),g=n(1601),h=n(1791),b=n(2253),y=n(1792),m=n(2254),_=n(1900),S=n(1901),O=n(1903),C=n(138),w=n(1517),E=n(1474),P=n(1787),V=n(263),A=n(1902),k=n(1899),I=n(1789),T=n(2255),j={"video-in-combo-design-ya-video-button":"clickThroughButton","video-in-combo-design-ya-video-title":"title","video-in-combo-design-ya-video-favicon":"favicon","video-in-combo-design-ya-video-domain":"domain","video-in-combo-design-ya-video-body":"body"},D=function(e){function t(t){var n=e.call(this)||this,r=new C.ValueSignal("closed"),o=new a.Latch;n.addDestroyHandler((function(){o.dispatch(void 0)}));var l=t.renderToNode,D=t.ssr,L=t.nonce,R=t.vast,N=t.vastBase64,M=t.dataSource,U=t.onAdInit,B=t.darkTheme;!R&&N&&u.logger.logVasEvent({vastBase64:N},"VideoInComboDesignYaVideoUsingVastVase64");var x=(0,c.renderVideoInComboSsrCodeToShadowRoot)({renderToNode:l,ssr:D,nonce:L,destroyLatch:o}).container;if(B){var F=T("VideoInComboDesignYaVideo_dark",D.salt);x.classList.add(F)}u.logger.logVasEvent({},"VideoInComboDesignYaVideoClientCodeInit");var H=(0,d.getRehydratedElement)(x,"video-in-combo-design-ya-video-image-container"),W=Number(H.dataset.imageContainerRatio);if(!(0,s.isPositiveFiniteNumber)(W))throw new Error("VideoInComboDesignYaVideoController image container ratio is NOT known");var K=new f.SizeSensor(H);n.addDestroyHandler((function(){K.destroy()})),(0,p.rehydrateVideoInComboImageContainerRatio)({destroyLatch:o,imageContainer:H,imageContainerSize:K.onResize,imageContainerRatio:W});var Y=(0,d.getRehydratedElement)(x,"slot"),z=(0,d.getRehydratedElement)(x,"video-slot"),G=new v.VisibilitySensor(Y);n.addDestroyHandler((function(){G.destroy()}));var q=(0,y.getVideoInComboTextNameClickUrl)(t),X=(0,A.getVideoInComboActionButtonClickUrl)(t),J=new g.AdLoaderPlayer({slot:Y,videoSlot:z,adLoaderConfig:{vast:R,vastBase64:N},onInit:function(e){U(),e.playAd(),G.totalVisibilityValueSignal.getValue()||e.pauseAd(),n.addDestroyHandler((0,w.combineValueSignals)([G.totalVisibilityValueSignal,r],(function(e,t){return e&&"closed"===t}),(function(t){t?e.resumeAd():e.pauseAd()}))),n.addDestroyHandler(J.isAdPodStarted.add((function(){e.setControlsVisibility({play:!1})})))},logParams:{},playbackParameters:i(i({},I.VIDEO_IN_COMBO_DEFAULT_VAS_PLAYBACK_PARAMETERS),{controlsSettings:{visibility:!1,controlsVisibility:{play:!0,disclaimers:!0,loader:!0}}}),loopVideoAfterPlayback:!0});n.addDestroyHandler(r.add((function(e){"reported"===e&&J.destroy()}))),(0,h.rehydrateZenVolumeButton)({container:x,adLoaderPlayer:J,destroyLatch:o}),(0,b.rehydrateVideoInComboAdLabel)({container:x,clickUrl:q,videoInComboDesign:"yaVideo",destroyLatch:o});for(var Z=0,Q=(0,V.getObjectEntries)(j);Z<Q.length;Z++){var $=Q[Z],ee=$[0],te=$[1],ne=(0,d.findRehydratedElement)(x,ee);ne&&n.addDestroyHandler((0,k.rehydrateClickThroughHandlerForAsset)({element:ne,clickUrl:X,videoInComboDesign:"yaVideo",assetName:te}))}var re=x.querySelector("[data-close]");if(!re)throw new Error("VideoInComboDesignYaVideoKebab is not found");var oe=(0,O.getVideoInComboAbuseUrl)(t);oe?(0,m.rehydrateVideoInComboAdTune)({adTuneScreenContainer:(0,d.getRehydratedElement)(x,"adtune-screen-container"),nonce:L,warningText:(0,_.getVideoInComboWarningText)(t),indent:void 0,closeButtonIndent:void 0,isSocialAd:M.isSocialAd(),popupSize:"large",copyLink:(0,S.getVideoInComboClickUrlToCopy)(t),language:M.getLanguage(),darkTheme:B,abuseUrl:oe,kebabElement:re,onOpenAdTune:function(){r.dispatch("opened"),u.logger.logVasEvent({},"VideoInComboDesignYaVideoAdTuneOpen")},actionCallback:function(e){"close"===e.actionType&&(u.logger.logVasEvent({},"VideoInComboDesignYaVideoAdTuneClose"),r.dispatch("closed")),"report"===e.actionType&&(u.logger.logVasEvent({},"VideoInComboDesignYaVideoAdTuneReport"),r.dispatch("reported")),e.prevent&&M.abuseAd(E.PREVENTS_BROWSING_ID)},destroyLatch:o}):u.logger.logVasEvent({},"VideoInComboDesignYaVideoNoAbuseUrl");var ie=(0,d.findRehydratedElement)(x,"canvas-blur-container");return ie&&(0,P.rehydrateCanvasBlurBackground)({canvasBlurContainer:ie,videoSlot:z,adLoaderPlayer:J}),n.addDestroyHandler((function(){J.destroy()})),n}return o(t,e),t}(l.Destroyable);t.VideoInComboDesignYaVideoController=D,t.VideoInComboController=D},2252:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rehydrateVideoInComboImageContainerRatio=void 0;var r=n(349);t.rehydrateVideoInComboImageContainerRatio=function(e){var t=e.imageContainer,n=e.imageContainerRatio,o=e.destroyLatch,i=e.imageContainerSize;o.subscribe(i.add((function(e){var o=e.width/n;(0,r.setStyle)(t,{height:"".concat(o,"px")})})))}},2253:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rehydrateVideoInComboAdLabel=void 0;var r=n(20),o=n(1500),i=n(1657),a=n(263),l=n(1899),c={adLabelDefault:{rehydratedName:"video-ad-label",hardcodedClickUrl:void 0},adLabelSurvey:{rehydratedName:"survey-ad-label",hardcodedClickUrl:i.SURVEY_AD_LABEL_URL},adLabelSocial:{rehydratedName:"social-ad-label",hardcodedClickUrl:void 0}};t.rehydrateVideoInComboAdLabel=function(e){var t=e.container,n=e.clickUrl,i=e.videoInComboDesign,u=e.destroyLatch,d=function(e){for(var t=0,n=(0,a.getObjectEntries)(c);t<n.length;t++){var r=n[t],i=r[0],l=r[1].rehydratedName,u=(0,o.findRehydratedElement)(e,l);if(u)return{element:u,hardcodedClickUrl:c[i].hardcodedClickUrl,assetName:i}}}(t);if(d){var s=d.assetName,f=d.hardcodedClickUrl,v=d.element;u.subscribe((0,l.rehydrateClickThroughHandlerForAsset)({element:v,clickUrl:null!=f?f:n,videoInComboDesign:i,assetName:s}))}else r.logger.logVasEvent({},"NO_AD_LABEL_FOUND")}},2254:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rehydrateVideoInComboAdTune=void 0;var r=n(178),o=n(672),i=n(686);t.rehydrateVideoInComboAdTune=function(e){var t=e.kebabElement,n=e.adTuneScreenContainer,a=e.nonce,l=e.warningText,c=e.indent,u=e.closeButtonIndent,d=e.isSocialAd,s=e.popupSize,f=e.copyLink,v=e.abuseUrl,p=e.language,g=e.darkTheme,h=e.actionCallback,b=e.onOpenAdTune;e.destroyLatch.subscribe((0,r.addElementEventListener)({element:t,eventName:"click",listener:function(){b();var e=(0,i.getAdvertiserInfoUrl)(v),t=d?"social":"default";(0,o.showAdtune)(n,{useNewAdtuneAndKebab:!0,abuseUrl:v,language:p,darkTheme:g,type:t,hasBackground:!1,advertiserInfoLink:e,hasBorders:!0,warning:l,indent:c,closeButtonIndent:u,copyLink:f,size:s,actionCallback:h},{nonce:a,protectNode:!0})}}))}},2255:function(e,t,n){var r=n(536);e.exports=function(e,t){return r.getAlias(r.getClassName("pb3fc88a3",e),t)}},2256:function(e,t,n){"use strict";var r,o=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.VideoInComboController=void 0;var a=n(672),l=n(2),c=n(30),u=n(100),d=n(1474),s=n(20),f=n(687),v=n(39),p=n(542),g=n(8),h=n(381),b=n(3),y=n(1793),m=n(373),_=n(1471),S=n(1797),O=n(37),C=n(558),w=n(692),E=n(685),P=n(560),V=n(678),A=n(680),k=n(1),I=n(686),T=n(1651),j=n(138),D=n(1657),L=n(1023),R=n(541),N=n(1500),M=n(1792),U=n(2257),B=n(1602),x=n(1903),F=n(2258),H=n(1900),W=n(1901),K=n(668),Y=n(2259),z=n(13);function G(e){return"clientComboInpage:".concat(e)}var q=function(e){function t(t){var n=e.call(this,t)||this;return n.wasVideoStarted=new j.ValueSignal(!1),n.wasClickedThrough=new j.ValueSignal(!1),n.playState=new j.ValueSignal(!1),t.dataSource||s.logger.logVasEvent({},"COMBO_INPAGE_INIT_NO_DATASOURCE",10),n.onChangeDocumentFocus=n.onChangeDocumentFocus.bind(n),(0,g.protect)(G("initClientLogic"),(function(){n.initClientLogic()}))(),n}return o(t,e),t.prototype.wrapShadowRootContainer=function(){var e,t=null===(e=this.renderToNode.lastElementChild)||void 0===e?void 0:e.shadowRoot;if(t)this.renderToNode=t.lastElementChild;else{var n=this.renderToNode.ownerDocument,r=n.createElement("div");0,this.renderToNode.appendChild(r);var o=n.createElement("div");0;try{(0,L.attachIsolateNode)(r,"open").appendChild(o),this.renderToNode=o}catch(e){s.logger.logVasEvent({isShadowDomSupported:(0,R.hasShadowDomSupport)()},"ERROR_TO_ISOLATE_NODE",10)}}},t.prototype.initClientLogic=function(){var e,t,n,r=this,o=this.props,i=o.nonce,a=o.ssr;this.renderToNode=this.props.renderToNode,"exp"===(0,k.useExperimentFlag)("VIDEO_IN_COMBO_ENABLE_SHADOW_ROOT")&&this.wrapShadowRootContainer(),this.renderToNode.innerHTML="".concat(a.html,"<style ").concat(i?'nonce="'.concat(i,'"'):"",">").concat(a.css,"</style>"),this.doOnDestroy((function(){r.inpageController&&r.inpageController.destroy(),r.renderToNode.innerHTML=""}));var l={header:this.renderToNode.querySelector("[data-button-header]"),footer:this.renderToNode.querySelector("[data-button-bottom]"),arm:this.renderToNode.querySelector('[data-name="button-arm"]')},c=this.renderToNode.querySelector("[data-visibility]"),d=this.renderToNode.querySelector("[data-videoslot]");if(!c||!d){var s=(0,u.getPlacement)(this.props.uniqueId);throw null==s||s.callbacks.triggerError("UNEXPECTED_DOM","Failed to find videoSlot in DOM"),new Error("Failed to find videoSlot in DOM")}this.initClickHandlers(this.renderToNode,l);var f=(0,T.onDocumentVisibilityChange)(document,this.onChangeDocumentFocus),v=(0,N.findRehydratedElement)(this.renderToNode,"video-in-combo-packshot");if(v&&"exp"===(0,k.useExperimentFlag)("MOVE_PACKSHOT_TO_PCODE")){var p=(null===(e=this.props.dataParams)||void 0===e?void 0:e.click_url)||{},g=p.text_name,b=p.action_button,y=new m.Url({host:this.wrapUrl(b||g)}).getUrl();this.renderPackshot=(0,z.once)((function(){r.inpageController.usePublicController((function(e){var t,n,o;e.setVolume(0),(0,Y.createPackshotOnSlot)({creativeSlot:v,clickUrl:y,label:null===(o=null===(n=null===(t=r.props.dataParams)||void 0===t?void 0:t.assets)||void 0===n?void 0:n.button)||void 0===o?void 0:o.caption,lang:r.props.dataSource.getLanguage(),openClickThroughUrl:function(){e.clickThrough()}})}))}))}else this.renderPackshot=void 0;var _=this.initInpageController({videoSlot:d,visibilitySlot:c,buttonElements:l});this.inpageController=_,this.doOnDestroy((function(){_.destroy(),f()})),(0,R.hasShadowDomSupport)()||this.observeContainer(c,_);var C=this.renderToNode.querySelector("[data-close]");C&&this.initAdtune(C,c,_),(null===(t=this.props.dataParams)||void 0===t?void 0:t.adId)&&(0,h.getAdUsageStorage)().capture({adId:this.props.dataParams.adId,renderTo:this.renderToNode.id});var w=(0,O.getBoundingClientRect)(this.renderToNode),E=w.width,P=w.height,V=(0,O.getBoundingClientRect)(d),A=V.width,I=V.height;(0,S.logInpageEvent)("LOGIC_INITED",this.props.dataSource,!0,{rootWidth:E,rootHeight:P,videoWidth:A,videoHeight:I});var j=this.renderToNode.querySelector("[data-arm]");(0,S.logInpageEvent)("INFO",this.props.dataSource,!0,{header:c.dataset.headersize||"none",arm:j?"available":"none",rootWidth:E,rootHeight:P,videoWidth:A,videoHeight:I,bannerId:null===(n=this.props.dataParams)||void 0===n?void 0:n.adId})},t.prototype.initClickHandlers=function(e,t){var n=this;this.initButtonClickHandler(t.header,"TOP_BUTTON_CLICK"),this.initButtonClickHandler(t.footer,"BOTTOM_BUTTON_CLICK"),this.initButtonClickHandler(t.arm,"ARM_BUTTON_CLICK"),this.initMainAnchor(e.querySelector("[data-headeranchor]"),"HEADER_CLICK"),this.initMainAnchor((0,N.findRehydratedElement)(e,"video-ad-label"),"HEADER_CLICK"),this.initMainAnchor((0,N.findRehydratedElement)(e,"survey-ad-label"),"HEADER_CLICK",D.SURVEY_AD_LABEL_URL),this.initMainAnchor(e.querySelector('[data-name="arm-anchor"]'),"ARM_CLICK");var r=e.querySelector("[data-sociallabel]");r&&this.addEventListener(r,"click",(0,g.protect)(G("adLabelClick"),(function(){(0,S.logInpageEvent)("DIRECT_CLICK",n.props.dataSource,!0,{wasVideoStarted:n.wasVideoStarted})})))},t.prototype.initMainAnchor=function(e,t,n){var r=this;if(e){var o=(0,M.getVideoInComboTextNameClickUrl)(this.props),i=null!=n?n:new m.Url({host:this.wrapUrl(o)}).getUrl();e.href=i,this.addEventListener(e,"click",(0,g.protect)(G("headerClick"),(function(){(0,S.logInpageEvent)(t,r.props.dataSource,!0,{wasVideoStarted:r.wasVideoStarted})})))}},t.prototype.initButtonClickHandler=function(e,t){var n,r=this;if(e){var o=(null===(n=this.props.dataParams)||void 0===n?void 0:n.click_url)||{},i=o.text_name,a=o.action_button,l=new m.Url({host:this.wrapUrl(a||i)}).getUrl();e.href=l,this.addEventListener(e,"click",(0,g.protect)(G("buttonClick"),(function(e){(0,S.logInpageEvent)(t,r.props.dataSource,!0,{wasVideoStarted:r.wasVideoStarted}),null==e||e.stopPropagation()})))}},t.prototype.wrapUrl=function(e){void 0===e&&(e="");var t=this.props.settings.clickMacro;return t?"".concat(t).concat(encodeURIComponent(e)):e},t.prototype.getAdtuneSize=function(){var e=(0,O.getBoundingClientRect)(this.renderToNode),t=e.width,n=e.height;return(0,F.isVideoInComboFullSizedAdtune)({width:t,height:n})?"large":"popup-small"},t.prototype.initAdtune=function(e,t,n){var r=this,o=this.props,i=o.dataSource,l=o.nonce,c=(0,x.getVideoInComboAbuseUrl)(this.props);if(c){var u=!1,s=0;this.addEventListener(e,"click",(0,g.protect)(G("kebabClick"),(function(){if(!u){(0,S.logInpageEvent)("KEBAB_CLICK",i,!0,{wasVideoStarted:r.wasVideoStarted}),window.performance&&(s=window.performance.now()),n.playState=!1;var e=(0,I.getAdvertiserInfoUrl)(c),o=i.isSocialAd()?"social":"default";(0,a.showAdtune)(t,{useNewAdtuneAndKebab:!0,abuseUrl:c,language:i.getLanguage(),type:o,hasBackground:!1,advertiserInfoLink:e,hasBorders:!0,warning:(0,H.getVideoInComboWarningText)(r.props),indent:r.getAdtuneIndent(t),closeButtonIndent:r.getAdtuneCloseButtonIndent(),copyLink:(0,W.getVideoInComboClickUrlToCopy)(r.props),size:r.getAdtuneSize(),callback:(0,g.protect)(G("adtuneClick"),(function(e){u=!1;var t=s&&window.performance.now()-s<2e3;(0,S.logInpageEvent)(t?"ADTUNE_INSTANT_CLOSE":"ADTUNE_CLOSE",i,!0,{overlapContent:e}),e?i.abuseAd(d.PREVENTS_BROWSING_ID):n.playState=!0}))},{nonce:l,protectNode:!0})}})))}},t.prototype.getAdtuneIndent=function(e){var t="8px",n="";switch(e.dataset.headersize){case"medium":n="18px";break;case"small":n="10px";break;case"none":n="8px";break;default:n="12px"}var r=(0,O.getBoundingClientRect)(this.renderToNode);return(0,F.isVideoInComboFullSizedAdtune)(r)&&(t="0",n="0"),{right:"".concat(t," !important"),top:"".concat(n," !important")}},t.prototype.getAdtuneCloseButtonIndent=function(){var e=(0,O.getBoundingClientRect)(this.renderToNode);return(0,F.isVideoInComboFullSizedAdtune)(e)?{top:"8px !important;",right:"8px !important;"}:void 0},t.prototype.initInpageController=function(e){var t,n=this,r=e.videoSlot,o=e.visibilitySlot,a=e.buttonElements,l=this.props,d=l.uniqueId,p=l.playerConfig,g=l.vast,h=l.vastBase64,b=l.onAdInit,y=l.dataSource,m=l.lang,O=g||(0,c.decode)(h||""),I="none"!==o.dataset.headersize,T=Boolean(o.querySelector('[data-name="arm-anchor"]')),j=Boolean(a.footer),D=I||j||T;(this.renderPackshot||D&&"exp"===(0,k.useExperimentFlag)("HIDE_VIDEO_IN_COMBO_PACKSHOT_BUTTON_IF_THERE_ARE_CLICKABLE_ASSETS"))&&(t={disableObjectFit:!0,disableOverlay:!0,disableButton:!0});var L=(0,C.visibilityObserver)(V.OneOfStrategy.from(P.AllOfStrategy.from(w.DocumentStrategy.factory,E.IntersectionStrategy.factory),A.DummyStrategy.factory),{portion:.5})(o,(function(e){e&&(L(),(0,S.logInpageEvent)("VISIBILITY_SLOT_BECAME_VISIBLE",y,!0))}));this.doOnDestroy(L);var R=(0,U.isSurvey)(this.props.productType),N={visibility:!1,controlsVisibility:{adLabel:!1,actionButton:!D,play:!0,loader:!0,disclaimers:!0,ageLabel:!I&&!T,mute:!R&&!0,timeline:!R&&!0,title:!D,body:!D}},M=i(i(i({},p),B.SURVEY_INPAGE_PLAYBACK_PARAMETERS),{packshotSettings:t,vast:O,replayMode:"manual",controlsSettings:N,visibilitySlot:o,pauseOnClickThrough:!1,clickThroughCallback:function(e){var t=e.url,r=e.onHandle;n.playState.dispatch(!1),n.wasClickedThrough.dispatch(!0),(0,S.logInpageEvent)("VIDEO_CLICK",y,!0),r(),(0,_.open)(n.wrapUrl(t))},lang:m?(0,K.getLangCode)(m):void 0}),x=new f.InpageController({videoContainer:r,adSdkInpageConfig:M,onError:function(e){s.logger.error(e||"UNKNOWN_VIDEO_ERROR","rtbInPage: initAdSdkInPage Error");var t=(0,u.getPlacement)(d);null==t||t.callbacks.triggerError("VIDEO_ERROR","Failed to init video bundle")}});return this.setControllerCallbacks(x),this.playState.add((function(e){x.playState=e})),x.usePublicController((function(e){try{e.setStatsRootFields({pcodeStats:{format:"inpage",pageId:y.getPageId(),impId:y.getImpId(),version:577937,vast:(0,v.isPercent)(1)?h||g:void 0}})}catch(e){s.logger.error(e,"ADSDK STATS ERROR")}})),x.usePublicController((function(){return b()})),x},t.prototype.onChangeDocumentFocus=function(e){this.wasClickedThrough.getValue()&&e&&(this.playState.dispatch(!0),this.wasClickedThrough.dispatch(!1))},t.prototype.setControllerCallbacks=function(e){var t=this,n=this.props,r=n.videoCallbacks,o=n.onHide,i=n.dataSource;e.setCallback("onAdSkipped",(function(e){var t=void 0===e&&(0,l.isFunction)(o);(0,S.logInpageEvent)("AD_SKIP",i,!0,{isSkippedFromMenu:t}),t&&o()})),e.setCallback("onAdStart",(function(){var e;t.wasVideoStarted.dispatch(!0),(0,S.logInpageEvent)("AD_START",i,!0),null===(e=null==r?void 0:r.onAdStart)||void 0===e||e.call(r),t.playState.dispatch(!0)})),e.setCallback("onStartError",(function(e){(0,S.logInpageEvent)("AD_START_ERROR",i,!0,{error:e.message,name:e.name})})),e.setCallback("onAdEnd",(function(){for(var e,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];(0,S.logInpageEvent)("AD_END",i,!0),null===(e=t.renderPackshot)||void 0===e||e.call(t),(0,l.isFunction)(null==r?void 0:r.onAdEnd)&&r.onAdEnd.apply(window,n)}))},t.prototype.observeContainer=function(e,t){var n=this;if("undefined"!=typeof IntersectionObserver){var r=b.noop;r=(0,y.onRemoveFromDOM)(e,(function(){(0,S.logInpageEvent)("REMOVED_FROM_DOM",n.props.dataSource,!0),t.destroy(),r()})),this.doOnDestroy(r)}},t}(p.Destroyable);t.VideoInComboController=q},2257:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSurvey=void 0,t.isSurvey=function(e){return void 0===e&&(e=""),-1!==e.search(/[Ss]urvey/)}},2258:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isVideoInComboFullSizedAdtune=void 0;t.isVideoInComboFullSizedAdtune=function(e){var t=e.width,n=e.height;return t<=300||n<=300}},2259:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPackshotOnSlot=void 0;var r=n(250),o=n(2260);t.createPackshotOnSlot=function(e){var t=e.clickUrl,n=e.creativeSlot,i=e.lang,a=e.openClickThroughUrl,l=n;(0,o.renderPackshot)({parent:l,clickUrl:t,openClickThroughUrl:a,label:(0,r.i18nBanners)("LEARN_MORE",null!=i?i:"ru")})}},2260:function(e,t,n){"use strict";var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.renderPackshot=void 0;var o=n(2261),i=n(20);t.renderPackshot=function(e){var t=e.openClickThroughUrl,n=e.parent,a=e.label;(0,o.renderPackshotLayout)(r(r({},e),{label:a,container:n,openClickThroughUrl:function(){i.logger.logVasEvent({},"VideoInComboPackshotButtonClicked",100),t()}})),i.logger.logVasEvent({},"VideoInComboPackshotBackgroundLoopedVideo",100)}},2261:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderPackshotLayout=void 0;var r=n(63),o=n(1025),i=n(2262),a=n(1904);t.renderPackshotLayout=function(e){var t=e.container,n=(0,r.h)(o.Style,null,(0,r.h)(a.PackshotContext.Provider,{value:(0,a.getPackshotContextValue)(e)},(0,r.h)(i.PackshotScreen,null)));return(0,r.render)(n,t),function(){(0,r.render)(null,t)}}},2262:function(e,t,n){"use strict";var r=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]},o=function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2263),t)},2263:function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PackshotScreen=void 0;var o=r(n(25)),i=n(63),a=n(2264),l=n(635),c=n(1904),u=n(2269),d=n(2273),s=r(n(1798));t.PackshotScreen=function(){(0,l.useStyles)(s["default"]);var e=(0,c.usePackshotContext)(),t=e.openClickThroughUrl,n=e.clickUrl,r=e.label;return(0,i.h)("div",{className:(0,o["default"])(s["default"].PackshotScreen,s["default"].PackshotScreenWrapper)},(0,i.h)("div",{className:s["default"].PackshotScreen__packshotOverlayWrapper},(0,i.h)(d.PackshotOverlay,null)),(0,i.h)("div",{className:s["default"].PackshotScreen__buttonWrapper},(0,i.h)(a.ClickThroughLink,{url:n,onClick:t},(0,i.h)(u.PackshotButton,null,r))))}},2264:function(e,t,n){"use strict";var r=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]},o=function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2265),t)},2265:function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ClickThroughLink=void 0;var o=n(63),i=n(2),a=n(635),l=r(n(2266));t.ClickThroughLink=function(e){var t=e.url,n=e.children,r=e.onClick,c=e.pointerEvents,u=e.preventDefault;(0,a.useStyles)(l["default"]);return(0,o.h)("a",{onClick:function(e){u&&e.preventDefault(),(0,i.isFunction)(r)&&r(),e.stopPropagation()},className:l["default"].ClickThroughLink,"data-pointer-events":c,href:t,target:"_blank",rel:"nofollow noreferrer"},n)}},2266:function(e,t,n){var r=n(2267),o=r._getCss;(e.exports=r)._getCss=function(e){return e=e||"",o().replace(/__id__/g,e)}},2267:function(e,t,n){var r=n(2268),o=n(637),i="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return i},t._getCss=function(){return""+r},t._insertCss=function(e){return o(i,e)}},2268:function(e,t,n){var r=n(636)(!1);r.push([e.i,"__id__ .h1f74ca17{color:inherit !important;text-decoration:none !important;pointer-events:auto !important}__id__ .h1f74ca17[data-pointer-events]{pointer-events:none !important}",""]),r.locals={ClickThroughLink:"h1f74ca17",clickThroughLink:"h1f74ca17"},e.exports=r},2269:function(e,t,n){"use strict";var r=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]},o=function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2270),t)},2270:function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PackshotButton=void 0;var o=n(63),i=n(635),a=r(n(1798));t.PackshotButton=function(e){var t=e.children;return(0,i.useStyles)(a["default"]),(0,o.h)("div",{className:a["default"].PackshotButton},(0,o.h)("div",{className:a["default"].PackshotButton__content},t))}},2271:function(e,t,n){var r=n(2272),o=n(637),i="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return i},t._getCss=function(){return""+r},t._insertCss=function(e){return o(i,e)}},2272:function(e,t,n){var r=n(636)(!1);r.push([e.i,"__id__ .cfd152966.k88de1b5{position:relative !important;width:100% !important;height:100% !important}__id__ .k88de1b5 .l734d3ab0{display:-webkit-box !important;display:-ms-flexbox !important;display:flex !important;-webkit-box-align:center !important;-ms-flex-align:center !important;align-items:center !important;-webkit-box-pack:center !important;-ms-flex-pack:center !important;justify-content:center !important}__id__ .k88de1b5 .l734d3ab0,__id__ .k88de1b5 .bc0ac5165{position:absolute !important;top:0 !important;left:0 !important;right:0 !important;bottom:0 !important}__id__ .k88de1b5 .tf912e283{width:100% !important;height:100% !important;background-color:#000 !important;opacity:.5 !important;pointer-events:all !important}__id__ .k88de1b5 .b95313c8f{display:inline-block !important;color:#000 !important;font-size:16px !important;font-family:YS Text,-apple-system,system-ui,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif !important;background-color:#ffd400 !important;border-radius:3px !important;cursor:pointer !important;-webkit-user-select:none !important;-moz-user-select:none !important;-ms-user-select:none !important;user-select:none !important;pointer-events:auto !important}__id__ .k88de1b5 .g634e3786{padding:10px 16px !important;line-height:16px !important}",""]),r.locals={PackshotScreenWrapper:"cfd152966",packshotScreenWrapper:"cfd152966",PackshotScreen:"k88de1b5",packshotScreen:"k88de1b5",PackshotScreen__buttonWrapper:"l734d3ab0",packshotScreenButtonWrapper:"l734d3ab0",PackshotScreen__packshotOverlayWrapper:"bc0ac5165",packshotScreenPackshotOverlayWrapper:"bc0ac5165",PackshotOverlay:"tf912e283",packshotOverlay:"tf912e283",PackshotButton:"b95313c8f",packshotButton:"b95313c8f",PackshotButton__content:"g634e3786",packshotButtonContent:"g634e3786"},e.exports=r},2273:function(e,t,n){"use strict";var r=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]},o=function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2274),t)},2274:function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PackshotOverlay=void 0;var o=n(63),i=n(635),a=r(n(1798));t.PackshotOverlay=function(){return(0,i.useStyles)(a["default"]),(0,o.h)("div",{className:a["default"].PackshotOverlay})}},233:function(e,t,n){"use strict";function r(e){var t=typeof e;return Boolean(e)&&("object"===t||"function"===t)}n.d(t,"a",(function(){return r}))},2424:function(e,t,n){"use strict";n.r(t),n.d(t,"VisibilitySensor",(function(){return M}));var r=n(32);function o(e){var t=e.getRootNode;if(Object(r["a"])(t))return t.call(e);for(var n=e;n.parentNode;)n=n.parentNode;return n}var i=function(e){try{return"display"in(t=e,void 0===n&&(n=window),("function"==typeof n.getComputedStyle?n.getComputedStyle(t,null):t.currentStyle)||{})}catch(e){return!1}var t,n},a=n(70);function l(e){return!!e&&"ShadowRoot"===Object(a["a"])(e)}var c=n(189),u=n(188),d=n(1557),s=n(138),f=n(554),v=n(555),p=n(233),g=new RegExp(["box-flex","box-flex-group","column-count","fill-opacity","flex","flex-grow","flex-positive","flex-shrink","flex-negative","font-weight","line-height","opacity","order","z-index","zoom"].join("|"),"i");function h(e,t,n,r){void 0!==n&&void 0!==t&&(n+=!g.test(t)&&n>>>0?"px":"",e.style.setProperty?e.style.setProperty(t,n,r?"important":""):e.style.cssText+=";"+t+": "+n+(r?"!important":""))}var b=n(1550),y=n(75);var m=n(556);function _(e,t,n){var r;return function(e,t,n,r){Object(p["a"])(t)?(r=Boolean(n),Object(v["a"])(t,(function(t,n){h(e,n,t,r)}))):h(e,t,n,r)}(e,function(e){var t={};return Object(y["a"])(e,(function(e){var n=e[0],r=e[1];t[n]=r})),t}(Object(b["a"])((r=t,"function"==typeof Object.entries?Object.entries(r):Object(b["a"])(Object(m["a"])(r),(function(e){return[e,r[e]]}))),(function(e){var t=e[0],n=e[1];return[S(t),n]}))),n)}var S=function(e){return e.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}))},O=n(116),C="function"==typeof IntersectionObserver&&Object(O["a"])(IntersectionObserver);function w(e,t,n){return e>n?n:e<t?t:e}var E=n(352),P=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1}([/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i],(function(e){return null!==navigator.userAgent.match(e)}));function V(e){var t=e.ownerDocument,n=t.defaultView,r=t.documentElement,o=e.getBoundingClientRect();return{winWidth:P?Math.max(r.clientWidth,(null==n?void 0:n.innerWidth)||0):(null==n?void 0:n.innerWidth)||r.clientWidth||t.body.clientWidth,winHeight:P?Math.max(r.clientHeight,(null==n?void 0:n.innerHeight)||0):(null==n?void 0:n.innerHeight)||r.clientHeight||t.body.clientHeight,left:o.left,top:o.top,width:o.width,height:o.height}}function A(e){var t=e.width,n=e.height,r=e.top,o=e.left,i=e.winWidth,a=e.winHeight,l=o+t,c=r+n,u=w(o,0,i),d=w(r,0,a);return{winWidth:i,winHeight:a,left:u,top:d,width:w(l,u,i)-u,height:w(c,d,a)-d}}function k(e,t){return e.width*e.height/(t.width*t.height)}function I(e){for(var t,n,r=function(e){return[V(e)].concat(Object(b["a"])(Object(E["a"])(e),V))}(e),o=A(r[0]),i=k(o,r[0]),a=1;a<r.length;a++){var l=r[a];i=k(o=A((t=o,{winWidth:(n=l).winWidth,winHeight:n.winHeight,left:t.left+n.left,top:t.top+n.top,width:t.width,height:t.height})),r[0])}return i}var T=function(e){return"hidden"in e?"hidden":"webkitHidden"in e?"webkitHidden":void 0};function j(e,t){void 0===t&&(t=!0);var n=T(e);return n?!e[n]:t}var D=n(178),L=n(57);function R(e,t){var n=function(e){var t=T(e);if(t)return t.replace(/hidden/i,"visibilitychange")}(e);return n?Object(D["addElementEventListener"])({element:e,eventName:n,listener:function(){t(j(e))}}):L["a"]}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var M=function(e){var t,n;n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r;r=a;function a(t,n){var r,a=void 0===n?{}:n,c=a.considerDocumentVisibility,u=void 0===c||c,f=a.numberOfMeasurementSteps,v=void 0===f?2:f,p=a.enableTrackVisibility,g=void 0!==p&&p;r=e.call(this)||this,Object.defineProperty(N(r),"element",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(N(r),"totalVisibilityValueSignal",{enumerable:!0,configurable:!0,writable:!0,value:new s["ValueSignal"](!1)}),Object.defineProperty(N(r),"totalVisibilityRatioValueSignal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(N(r),"elementVisibilityRatioValueSignal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(N(r),"documentVisibilityValueSignal",{enumerable:!0,configurable:!0,writable:!0,value:new s["ValueSignal"](!0)}),Object.defineProperty(N(r),"isElementReachableByTrackVisibilityValueSignal",{enumerable:!0,configurable:!0,writable:!0,value:new s["ValueSignal"](!0)}),Object.defineProperty(N(r),"recalculateVisibility",{enumerable:!0,configurable:!0,writable:!0,value:function(){if(!r.isDestroyed&&function(e){for(var t=e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window,n=e;n;){if(n&&t.document.body.contains(n))return!0;var r=o(n);if(!l(r)||!i(r.host))return!1;n=r.host}return!1}(r.element)){var e=I(r.element);r.elementVisibilityRatioValueSignal.dispatch(e)}}});var h=Math.max(v,2),b=t.ownerDocument.defaultView;r.elementVisibilityRatioValueSignal=new s["ValueSignal"](0);var y=b.IntersectionObserver;Boolean(y)?r.startIntersectionObserver(y,h):r.startVisibilityCheckInterval(b),g&&Boolean(y)&&function(e){return!!C&&("IntersectionObserverEntry"in e&&"isVisible"in e.IntersectionObserverEntry.prototype)}(b)&&r.startCheckVisibilityWithTrackVisibility(b),u&&r.startObservingDocumentVisibility(b);var m=Object(d["combineValueSignalsIntoNewOne"])([r.elementVisibilityRatioValueSignal,r.documentVisibilityValueSignal,r.isElementReachableByTrackVisibilityValueSignal],(function(e,t,n){return n&&t?e:0})),_=m.valueSignal,S=m.teardown;return _.add((function(e){r.totalVisibilityValueSignal.dispatch(e>=.5)})),r.totalVisibilityRatioValueSignal=_,r.addDestroyHandler((function(){r.totalVisibilityValueSignal.removeAll(),S(),r.elementVisibilityRatioValueSignal.removeAll(),r.documentVisibilityValueSignal.removeAll(),r.isElementReachableByTrackVisibilityValueSignal.removeAll()})),r}var u=a.prototype;return u.startIntersectionObserver=function(e,t){for(var n=this,r=[.5],o=1/t,i=1;i<t;i++)r.push(i*o);var a=new e((function(e){var t=e[0].intersectionRatio;n.elementVisibilityRatioValueSignal.dispatch(t)}),{threshold:r});a.observe(this.element),this.addDestroyHandler((function(){a.disconnect()}))},u.startVisibilityCheckInterval=function(e){var t=Object(c["a"])(this.recalculateVisibility);this.addDestroyHandler(t);var n=e.setTimeout(this.recalculateVisibility,0);this.addDestroyHandler((function(){e.clearTimeout(n)}))},u.startCheckVisibilityWithTrackVisibility=function(e){var t=function(e){var t=e.element,n=e.win,r=new s["ValueSignal"](!0),o=t.ownerDocument.createElement("div");_(o,{pointerEvents:"none",width:"4px",height:"4px",position:"absolute",top:"50%",left:"50%",marginTop:"-1px",marginLeft:"-1px",zIndex:"999"},!0),t.append(o);var i=new n.IntersectionObserver((function(e){var t=e[0].isVisible,n=void 0===t||t;r.dispatch(n)}),{trackVisibility:!0,delay:100});return i.observe(o),{teardown:function(){i.disconnect(),r.removeAll(),Object(f["a"])(o)},visualVisibilitySignal:r}}({element:this.element,win:e}),n=t.teardown,r=t.visualVisibilitySignal;this.addDestroyHandler(n),r.add(this.isElementReachableByTrackVisibilityValueSignal)},u.startObservingDocumentVisibility=function(e){var t=this,n=e.setTimeout((function(){var n=e.document,r=j(n);t.documentVisibilityValueSignal.dispatch(r);var o=R(n,(function(e){t.documentVisibilityValueSignal.dispatch(e)}));t.addDestroyHandler(o)}),0);this.addDestroyHandler((function(){e.clearTimeout(n)}))},a}(u["a"])},352:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=function(e){return void 0===e&&(e=window),function(e){void 0===e&&(e=window);var t=n(140)(e);return"boolean"==typeof t?-1:t}(e)>11};function o(e){return function(e){return Boolean(e.PointerEvent)}(e)&&function(e){var t=e.navigator||{},n=t.msMaxTouchPoints,r=t.maxTouchPoints;return n||r||0}(e)>0&&!r(e)}var i=function(e,t,n){for(var r=new Array(e.length),o=0;o<e.length;o++)r[o]=t.call(n,e[o],o,e);return r},a=n(32),l=n(233);function c(e,t){if(!Object(a["a"])(e.matchMedia))return!1;var n=e.matchMedia(t);return Object(l["a"])(n)&&Boolean(n.matches)}var u=["","-webkit-","-ms-","-moz-","-o-"],d=i(u,(function(e){return"("+e+"any-pointer:coarse)"})).join(",");var s=i(u,(function(e){return"("+e+"touch-enabled)"})).join(",");function f(e){return void 0===e&&(e=window),o(e)||function(e){return c(e,d)}(e)||function(e){return c(e,s)}(e)||function(e){var t=e.DocumentTouch;return Boolean(t)&&e.document instanceof t}(e)||function(e){return"ontouchstart"in e}(e)}function v(e){void 0===e&&(e=window);var t=e.navigator.userAgent.toLowerCase();return/ipad|iphone|ipod/.test(t)&&!e.MSStream&&!function(e){return void 0===e&&(e=window),e.navigator.userAgent.indexOf("UCBrowser")>-1}(e)}var p=function(e){void 0===e&&(e=window);var t=function(e){void 0===e&&(e=window);try{return(e.navigator||{}).userAgent||""}catch(e){return""}}(e).toLowerCase();if(t.indexOf("android")>-1)return!1;var n=t.replace(/\(.+?\)/gi,"").split(" ").map((function(e){return e.trim().split("/")[0]})).filter((function(e){return e&&"mobile"!==e}));return 4===n.length&&"mozilla"===n[0]&&"applewebkit"===n[1]&&"version"===n[2]&&"safari"===n[3]};var g,h=(void 0===g&&(g=window),p(g)||v(g)||function(e){return void 0===e&&(e=window),/Apple/.test(e.navigator.vendor)&&f(e)}(g));function b(e,t){if(void 0===t&&(t=!0),h&&t)return[];for(var n=[],r=e;;)try{if(!(r=r.ownerDocument.defaultView.frameElement))return n;n.push(r)}catch(e){return n}}},353:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(70),o=function(e){return e instanceof Error||"Error"===Object(r["a"])(e)}},354:function(e,t,n){"use strict";function r(e){var t=function(){var n;return t=function(){return n},n=e.apply(this,arguments)};return function(){return t.apply(this,arguments)}}n.d(t,"a",(function(){return r}))},378:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPositiveFiniteNumber=void 0,t.isPositiveFiniteNumber=function(e){return"number"==typeof e&&isFinite(e)&&e>0}},551:function(e,t,n){"use strict";n.r(t),n.d(t,"Latch",(function(){return c}));var r=n(32),o=n(88),i=n(104),a=n(57),l=n(354),c=function(){function e(e){var t=this;Object.defineProperty(this,"dispatch",{enumerable:!0,configurable:!0,writable:!0,value:Object(l["a"])((function(e){t.value=e,t._isDispatched=!0,Object(i["a"])(t.callbacks,e),t.callbacks.length=0}))}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_isDispatched",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(r["a"])(e)&&this.callbacks.push(e)}var t=e.prototype;return t.subscribe=function(e){var t=this;return this._isDispatched?(e(this.value),a["a"]):(this.callbacks.push(e),function(){t.callbacks=Object(o["a"])(t.callbacks,(function(t){return t!==e}))})},t.getDispatched=function(){return this._isDispatched},t.getValue=function(){return this.value},t.wait=function(){var e=this;return new Promise((function(t){e.subscribe(t)}))},e}()},552:function(e,t){e.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);return e})},554:function(e,t,n){"use strict";function r(e){if(e){var t=e.parentElement;t&&t.removeChild(e)}}n.d(t,"a",(function(){return r}))},555:function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function o(e,t,n){for(var o in e)r(e,o)&&t.call(n,e[o],o,e)}n.d(t,"a",(function(){return o}))},556:function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function o(e){if("function"==typeof Object.keys)return Object.keys(e);var t=[];for(var n in e)r(e,n)&&t.push(n);return t}n.d(t,"a",(function(){return o}))},668:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLangCode=void 0;var r={1:"ru",2:"uk",3:"en",4:"by",5:"kz",6:"tr",7:"tt"};t.getLangCode=function(e){var t=String(e);if((0,n(64).includes)((0,n(38).getObjectKeys)(r),t))return r[t]}},671:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prepareVasLoaderConfig=void 0,t.prepareVasLoaderConfig=function(e){var t=e||(0,n(34).getUaasConfig)();return{additionalCustomRootFields:{pcodeVersion:"".concat((0,n(28).getCodeVersion)()),vsid:n(117).VSID},vasUaasConfig:t}}},673:function(e,t,n){"use strict";n.r(t),n.d(t,"loadVasModule",(function(){return Me}));var r=n(148);function o(e){return Object(r["a"])(e)&&e.length>0}var i=n(88);function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Object(i["a"])(t,Boolean);if(0!==r.length)return r.join(";")}function l(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){if(void 0!==e){if(!Object(r["a"])(e))throw new Error("testIdsString is not a string or undefined ["+e+"]");if(0!==e.length){for(var t,n=l(e.split(";"));!(t=n()).done;){var o=t.value.split(",");if(3!==o.length)throw new Error("testIdParts length error ["+e+"]");var i=o[0],a=o[2];if(0===i.trim().length)throw new Error("testId length error ["+e+"]");if(0===a.trim().length)throw new Error("testId bucket length error ["+e+"]")}return e}}}var d=n(102),s=n(551);function f(e){if(e&&e.location){var t=e.location;return"function"==typeof t.toString?t.toString():t.href||""}return""}var v=n(352);function p(e){var t="",n="";e&&function(e){var t=Object(v["a"])(e.documentElement).map((function(e){return e.ownerDocument}));return t.unshift(e),t.map((function(e){return{location:f(e.defaultView),referrer:e.referrer}}))}(e).reverse().forEach((function(e){var r=e.location,o=e.referrer;t=t||r,n=n||o}));return{location:t,referrer:n}}function g(e){var t=function(){var n;return t=function(){return n},n=e.apply(this,arguments)};return function(){return t.apply(this,arguments)}}function h(){}var b=n(555);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){var t=e.method,n=e.url,r=e.async,o=void 0===r||r,i=e.data,a=e.responseType,l=void 0===a?"text":a,c=e.onBeforeSend,u=void 0===c?h:c,d=e.onRetry,s=void 0===d?h:d,f=e.checkStatus,v=void 0===f?function(e){return 200===e}:f,p=e.headers,S=void 0===p?{}:p,O=e.xhrConstructor,C=void 0===O?XMLHttpRequest:O,w=e.retries,E=void 0===w?0:w,P=e.timeout,V=void 0===P?0:P,A=e.withCredentials,k=e.onAbort,I=e.onSetup;if(C){var T,j=e.onSuccess?g(e.onSuccess):h,D=e.onError?g(e.onError):h,L=!1,R=0,N=function(e){L=!0,N=h,T=e,M(new Error("Abort request")),"function"==typeof k&&k(e)},M=function(t){if(U.onerror=null,U.onreadystatechange=null,R&&clearTimeout(R),R&&4!==U.readyState||L)try{U.abort()}catch(t){}if(!L)if(E>0){var n=s(t,U);if("boolean"!=typeof n||Boolean(n)||N(),L)return;_(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{onSetup:function(e){var t=e.abort;N=function(e){return t(e)},L&&t(T)},retries:E-1}))}else N=h,D(t,U)},U=new C;try{U.open(t,n,o)}catch(e){return void M(e)}if(U.responseType=l,U.withCredentials=Boolean(A),Object(b["a"])(S,(function(e,t){try{U.setRequestHeader(t,e)}catch(e){}})),V>0&&isFinite(V)&&(R=window.setTimeout((function(){M(new Error("Request timeout, "+n))}),V)),U.onerror=M,U.onreadystatechange=function(){if(4===U.readyState){var e=U.status;v(e)?(N=h,clearTimeout(R),j(U)):M(new Error("Invalid request status "+e+", "+n))}},!("function"==typeof I&&(I({abort:function(e){return N(e)}}),L)||(u(U,e),L)))try{U.send(i)}catch(e){M(e)}}}var S=n(116),O=function(e){return Object(S["a"])(e.navigator.sendBeacon)},C=O(window);var w=n(70);var E=function(e,t){var n=e[t];if(!Object(S["a"])(n)){var r=n;try{delete e[t];var o=e[t];"function"==typeof o&&(n=o),e[t]=r}catch(e){}}return n}(Array,"isArray");Boolean(E);var P=h,V=h,A=h;function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j,D,L;j={propertyName:"YANDEX_STATS_GLOBAL_CALLBACK_PROPERTY_NAME",win:window},D=j.win,L=j.propertyName;function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var N=function(){function e(e){var t=this,n=e.defaultProbability,r=e.rnd,o=e.vsid;Object.defineProperty(this,"rnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"vsid",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"defaultProbability",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var n=e.error,r=e.getTagsAndLabels;t.push({eventName:String(n.code),eventType:"error",eventData:n,probability:1,getTagsAndLabels:r})}}),this.rnd=r,this.vsid=o,this.defaultProbability=n}var t=e.prototype;return t.event=function(e){var t=e.name,n=e.probability,r=e.data,o=e.getTagsAndLabels;this.push({eventType:"event",eventName:t,probability:n,eventData:r,getTagsAndLabels:o})},t.push=function(e){var t=e.eventType,r=e.eventName,o=e.probability,i=void 0===o?this.defaultProbability:o,a=e.eventData,l=e.getTagsAndLabels;if(this.rnd<i){var c,u="https://log.strm.yandex.ru/log?"+t+"="+r,d="function"==typeof l?l(t,r):{tags:{},labels:{}},s=d.tags,f=d.labels,v=n.lv["json"].stringify({service:"VAS",eventType:t,eventName:r,rnd:this.rnd,vsid:this.vsid,data:a,tags:R((c={},c[t+"_"+r]=1,c),s),labels:R({},f),topLocation:p(document).location});if(function(e,t){return!!C&&window.navigator.sendBeacon(e,t)}(u,v))return;_({url:u,data:v,method:"POST"})}},e}(),M={adsdkdebug:Boolean(U("adsdkdebug")),adsdkecmaver:function(){var e=U("adsdkecmaver");if("ES2017"===e||"ES5"===e)return e;return}()};function U(e){if("undefined"!=typeof localStorage)return localStorage.getItem(e)||void 0}var B=M.adsdkdebug?1:.05,x=n(143),F=Object(x["a"])();function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var W=n(353),K=n(75),Y=n(144),z=n(354),G=n(556),q=n(113);function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var J=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Z={testIds:"",flags:{}};Object(z["a"])((function(){try{return __UAAS_CFG__}catch(e){return e}}));var Q=function(e){if(Object(W["a"])(e))return{error:e,config:Z};try{var t=Object(q["a"])(e)?e:n.lv["json"].parse(""+(e||"")),r=function(e){return!!Object(q["a"])(e)&&!(!("expFlags"in e)||!Object(Y["a"])(e.expFlags))}(t)?function(e){e.expFlags;var t=J(e,["expFlags"]),n={},r={};return Object(K["a"])(e.expFlags,(function(e){Object(K["a"])(e,(function(e){var t=e.CONTEXT.FLAGS,o=e.TESTID;Object(q["a"])(t)&&Object(K["a"])(Object(G["a"])(t),(function(e){var i,a=t[e];n[e]=a,r[e]=null!==(i=r[e])&&void 0!==i?i:[],r[e].push({value:a,testId:o[0]})}))}))})),X({flags:n,flagsMap:r},t)}(t):t;if(!function(e,t){if(!Object(q["a"])(t))throw new Error("Parsed replaced macro is not an object: "+e);if(u(t.testIds),!("flags"in t)||!Object(q["a"])(t.flags))throw new Error("Parsed replaced macro has no flags field: "+e);return!0}(String(e),r))throw new Error("UAAS config is not valid: "+e);return{error:void 0,config:r}}catch(e){return{error:e,config:Z}}},$=function(e){var t,n,r=Q(e),i=r.error,a=r.config;if(!i){var l=a.flags,c=null!==(t=l["ADSDKVER"])&&void 0!==t?t:l["VAS_STABLE_VERSION"],u=o(c)?parseInt(c,10):void 0;if("number"==typeof(n=u)&&isFinite(n)&&n>=0)return{resolveType:"UAAS Config",version:u,parsedUaasConfig:a,parseUaasConfigError:void 0}}return{resolveType:"none",version:void 0,parsedUaasConfig:void 0,parseUaasConfigError:i}},ee=function(e){return function(e){try{if("noModule"in e.HTMLScriptElement.prototype)return!0}catch(e){}return!1}(e)&&O(e)}(window)?"ES2017":"ES5";function te(e,t){var n,r,o;return null===(o=null===(r=null===(n=t.ya)||void 0===n?void 0:n.videoAd)||void 0===r?void 0:r.loadedModules)||void 0===o?void 0:o[e]}var ne=n(32),re=n(233);function oe(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ie(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ae=function(e,t){for(var n,r=oe(t.split("."));!(n=r()).done;){var o=n.value;if(!Object(re["a"])(e)){e=void 0;break}e=e[o]}return e},le="__ADB_CONFIG__",ce=Object(re["a"])(le)&&le.fn&&Object(ne["a"])(le.fn.encodeUrl)?le.fn.encodeUrl:void 0,ue=void 0!==ce?function(e){return ce(e)}:void 0,de=function(e){if(void 0===e&&(e=window),ue)return ue;for(var t=function(e){for(var t=[];e;)try{if(f(e),t.push(e),e.parent===e)break;e=e.parent}catch(e){break}return t}(e);t.length;){var n=t.pop();if(n){var r=ae(n,"ya.videoAd.encodeUrl");if(Object(ne["a"])(r))return r}}},se={ES5:"bundles",ES2017:"bundles-es2017"};function fe(){return(fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ve=fe(fe({},{InPage:"inpage",AdLoader:"loader",VideoBannerAd:"videobannerad",Multiroll:"multiroll",YaMusicAPI:"ya-music-api",VpaidPlayer:"vpaid_player",Rum:"rum"}),{MotionTGO:"motion_ad_creative",MotionTailor:"motion_tailor_ad_creative",InteractiveElementsAdCreative:"interactive_elements_ad_creative",SurveyOldDesignAdCreative:"survey_old_design_ad_creative"}),pe="undefined"==typeof BUNDLES_PATH?"":BUNDLES_PATH,ge=("undefined"==typeof BUNDLE_NAME||BUNDLE_NAME,"undefined"==typeof BUILD_TIME||BUILD_TIME,["aw","ap","s-a","d-sd","k-j","s"].join("")),he=(["a","n.ya","nd","ex.ru"].join(""),["y","a","nde","x.ru"].join("")),be=["ya","sta","tic.net"].join(""),ye=(["ver","ify.y","a","nde","x.ru"].join(""),"https://"+be+"/"+ge+"-bundles/");function me(e){return pe||function(e){return ye+"1.0-"+e+"/"}(e)}var _e=function(e){var t=e.bundleName,n=e.win,r=e.ecmaVersion,o=e.version,i=se[r],a=de(n),l=ve[t]+".bundle.js",c=""+me(o)+i+"/"+l;return Object(ne["a"])(a)?a(c):c},Se=n(57),Oe=Object(v["a"])(document.documentElement),Ce=Oe.length;Ce>0?Oe[Ce-1].ownerDocument.defaultView:window;var we=n(554);function Ee(e){return function(e){var t=e.src,n=e.win,r=e.onBeforeLoad,o=void 0===r?Se["a"]:r,i=new d["a"](new Error,{}),a=Se["a"];return{promise:new Promise((function(e,r){var l=n.document.createElement("script"),c=!1;a=function(){c=!0,Object(we["a"])(l)};l.type="text/javascript",l.async=!0,l.onload=function(){c||e()},l.onerror=function(e){c||(r(new d["a"](i,{message:"Failed to load script ["+t+"]",details:{src:t,isSelfWindow:n===window,event:e}})),a())},l.src=t,l.charset="utf-8",o(l),function(e){var t=e.document,n=t.getElementsByTagName("head")[0];return n||(n=t.createElement("head"),t.documentElement.appendChild(n)),n}(n).appendChild(l)})),teardown:a}}(e)}var Pe,Ve="https://"+he+"/ads/system/video-ads-sdk/vas_uaas",Ae=function(){return new Promise((function(e,t){_({method:"GET",url:Ve,responseType:"json",retries:2,onSuccess:function(t){e(t.response)},onError:function(){t(new Error("Cannot load uaas"))}})}))},ke=n(202);function Ie(e,t,n){void 0===n&&(n=" ");var r=t-e.length;if(r>0){for(var o=n;o.length<r;)o+=o;return(o.length>r?o.substr(0,r):o)+e}return e}try{Pe=VERSIONS_CONFIG}catch(e){Pe={}}var Te,je=Pe.build,De="VAS",Le=function(e){return Ie(String(e%Math.pow(10,4)),4,"0")},Re=(void 0===(Te=1)&&(Te=je),[Object(ke["a"])(44),De,Le(Te),Ie(Date.now().toString().slice(0,10),10,"0")].join("x"));function Ne(){return(Ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Me=function(e){var t,n=e.win,r=e.config,i=r.vasUaasConfig,l=r.additionalCustomRootFields,c=r.vh_sid,f=e.moduleName,v=e.serviceName,p=e.serviceVersion,g=null!==(t=null==l?void 0:l.vsid)&&void 0!==t?t:Re,h=function(e){var t=e.serviceName,n=e.serviceVersion,r=e.vsid,o=new N({rnd:F,vsid:r,defaultProbability:B}),i=function(e,r){var o,i=t||"unknown",a=n||"unknown";return{tags:(o={},o[e+"_"+r+"_"+i+"_"+a]=1,o),labels:{version:"loadVasModule_"+i+"_"+a}}};return{event:function(e){return o.event(H({getTagsAndLabels:i},e))},error:function(e){return o.error(H({getTagsAndLabels:i},e))}}}({serviceName:v,serviceVersion:p,vsid:g}),b=Ne({},l),y=o(c)?c:void 0;!o(b.vh_sid)&&y&&(b.vh_sid=y);var m,_,S=function(e,t){try{return e()}catch(e){"function"==typeof t&&t(e)}}((function(){return u(null==b?void 0:b.testIds)}),(function(e){h.error({error:new d["a"]({code:"LOAD_VAS_MODULE_INVALID_TEST_IDS",details:{message:e.message}})})}));return m=function(e){var t=e.resolve,r=e.reject,o=e.subscribeForTeardown,l=!1;o((function(){l=!0,r(new Error("Teardown called"))})),function(e){var t=e.externalUaasConfig,n=e.loaderFunctionsStatsWrapper;return new Promise((function(e,r){var o,i,a=$(t);t?a.parseUaasConfigError?n.error({error:new d["a"]({code:"LOAD_VAS_MODULE_PARSE_EXTERNAL_UAAS_CONFIG_ERROR",details:{message:a.parseUaasConfigError.message,vasUaasConfig:t}})}):void 0===(null===(i=null===(o=a.parsedUaasConfig)||void 0===o?void 0:o.flags)||void 0===i?void 0:i.VAS_STABLE_VERSION)&&n.error({error:new d["a"]({code:"LOAD_VAS_MODULE_NO_VAS_STABLE_VERSION_IN_EXTERNAL_AB_FLAGS",details:{vasUaasConfig:t}})}):n.event({name:"LoadVasModule_NoUAAS",data:{}}),a.version?e({uaasConfig:a.parsedUaasConfig,rawUaasConfig:t,version:a.version}):Ae().then((function(t){var r,o,i,a=$(t);a.parseUaasConfigError?n.error({error:new d["a"]({code:"LOAD_VAS_MODULE_PARSE_LOADED_UAAS_CONFIG_ERROR",details:{message:a.parseUaasConfigError.message,vasUaasConfig:t}})}):void 0===(null===(o=null===(r=a.parsedUaasConfig)||void 0===r?void 0:r.flags)||void 0===o?void 0:o.VAS_STABLE_VERSION)&&n.error({error:new d["a"]({code:"LOAD_VAS_MODULE_NO_VAS_STABLE_VERSION_IN_LOADED_AB_FLAGS",details:{vasUaasConfig:t}})}),e({uaasConfig:a.parsedUaasConfig,rawUaasConfig:t,version:null!==(i=a.version)&&void 0!==i?i:t.stableVersion,stableVersion:t.stableVersion})}))["catch"](r)}))}({externalUaasConfig:i,loaderFunctionsStatsWrapper:h}).then((function(e){var i,c,u,s=e.uaasConfig,v=e.rawUaasConfig,p=e.version,y=e.stableVersion;if(!l){if(function(e){return!(!function(e){var t=e.document;return"documentMode"in t&&void 0!==t["documentMode"]}(e)&&!function(e){var t=e.navigator.userAgent;return t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0}(e))}(n)){var m="Multiroll"===f&&"TRUE"===(null===(i=null==s?void 0:s.flags)||void 0===i?void 0:i["VAS_IE_STOP_MULTIROLL"]),_="Multiroll"!==f&&"TRUE"===(null===(c=null==s?void 0:s.flags)||void 0===c?void 0:c["VAS_IE_STOP_OTHER_THAN_MULTIROLL"]);if(m||_)return h.event({name:"LoadVasModule_brokeInIE11",probability:B,data:{bundleName:f}}),t(void 0)}var O={AB_FLAGS:null!==(u=null==s?void 0:s.flags)&&void 0!==u?u:{},ICOOKIE:null==s?void 0:s.iCookie,TEST_IDS:a(S,null==s?void 0:s.testIds),VAS_UAAS_CONFIG:s,AdditionalStatsRootFields:b,VSID:g,VAS_USER_SESSION_RANDOM:F,LOADER_LOADED_FROM_AN_YANDEX_RU:void 0,STATS_ROOT_PARAMS:{}},C=function(e){var t=function(e){var t,n=e.moduleName,r=e.version,o=e.win,i=e.scriptSessionParams,a=te(n,o);if(a)return{promise:Promise.resolve(a),teardown:Se["a"]};var l=Ee({src:_e({version:r,bundleName:n,win:o,ecmaVersion:null!==(t=M.adsdkecmaver)&&void 0!==t?t:ee}),win:o,onBeforeLoad:function(e){var t;(function(e){e.crossOrigin="anonymous"})(e),t=i,e.__AD_SDK_SCRIPT_SESSION_PARAMETERS__=t}}),c=l.promise,u=l.teardown;return{promise:c.then((function(){return te(n,o)})),teardown:u}}({moduleName:f,scriptSessionParams:O,version:e,win:n}),r=t.promise,i=t.teardown;return o(i),r},w=function(e){h.event({name:"LoadVasModule_ModuleLoaded",probability:B,data:{bundleName:f}}),t(e)};C(p).then(w)["catch"]((function(e){if(p===y)throw e;return h.error({error:new d["a"]({code:"LOAD_VAS_MODULE_CANNOT_LOAD_MODULE_WITH_UAAS_VERSION",details:{vasUaasConfig:v}})}),y?C(y).then(w):Ae().then((function(e){return e.stableVersion})).then(C).then(w)}))["catch"](r)}}))["catch"](r)},_=new s["Latch"],{promise:new Promise((function(e,t){m({resolve:e,reject:t,subscribeForTeardown:function(e){_.subscribe(e)}})})),teardown:function(){return _.dispatch(void 0)}}}},679:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VAS_CONTROLS_SETTINGS_HIDE_ALL=void 0,t.VAS_CONTROLS_SETTINGS_HIDE_ALL={visibility:!1,controlsVisibility:{}}},682:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isError=void 0;t.isError=function(e){return e instanceof Error||"Error"===(0,n(68).getInternalClass)(e)}},687:function(e,t,n){"use strict";var r,o=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function i(e,t){var r=(0,n(12).getYaContext)();r.Rum&&r.Rum.then((function(n){n&&n.isRumInited()&&n.sendDelta("pcode.vasLoad.".concat(t),e)}))}Object.defineProperty(t,"__esModule",{value:!0}),t.InpageController=void 0;var a=function(){function e(){}return e.getInstance=function(){return this.instance},e.prototype.setUaasConfig=function(e){this.uaasConfig=e},e.prototype.loadInpageModule=function(){var e=this;if(this.loadVasModulePromise)return this.loadVasModulePromise;this.loadVasModulePromise=(0,n(8).protect)("InpageController::CallLoadVasModule",(function(){return(0,n(673).loadVasModule)({win:window,moduleName:"InPage",config:(0,n(671).prepareVasLoaderConfig)(e.uaasConfig),serviceName:"pcode",serviceVersion:String((0,n(28).getCodeVersion)())}).promise.then((function(e){if(!e)throw new Error("LVM returned no InPage module");return e}))}))();var t=this.loadVasModulePromise||Promise.reject();return t["catch"]((function(e){n(20).logger.logVasEvent({error:e},"InPageError")})),t},e.instance=new e,e}(),l=function(e){function t(t){var r=e.call(this)||this;return r.plays=!0,r.callbacks=[],r.sendDeltaVasLoad=(0,n(13).once)(i),r.init(t),r}return o(t,e),t.setUaasConfig=function(e){a.getInstance().setUaasConfig(e)},t.prototype.init=function(e){var t=this,r=e.videoContainer,o=e.adSdkInpageConfig,i=e.onError,l=(0,n(13).once)(i),c=performance.now();a.getInstance().loadInpageModule().then((function(e){e.addInPageVideo(r,o,(function(e){if((0,n(682).isError)(e))l(e);else{t.sendDeltaVasLoad(performance.now()-c,"loadVasModule");var r=e;if(t.isDestroyed)return void r.destroy();t.inpageController=r,(0,n(0).forEach)(t.callbacks,(function(e){return e(r)})),t.playState=t.plays,t.addDestroyHandler((function(){return r.destroy()}))}}))}))["catch"](l)},t.prototype.setCallback=function(e,t){this.usePublicController((function(n){n[e]=t}))},t.prototype.usePublicController=function(e){this.inpageController?e(this.inpageController):this.callbacks.push(e)},Object.defineProperty(t.prototype,"playState",{get:function(){return this.plays},set:function(e){if(this.plays=e,!this.isDestroyed&&this.inpageController){var t=this.inpageController.getPaused();t&&e&&this.inpageController.play(),t||e||this.inpageController.pause()}},enumerable:!1,configurable:!0}),t.prototype.play=function(){this.playState=!0},t.prototype.pause=function(){this.playState=!1},t}(n(232).Destroyable);t.InpageController=l}}]);